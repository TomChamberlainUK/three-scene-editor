"use strict";
(self["webpackChunkloaded_scene_editor"] = self["webpackChunkloaded_scene_editor"] || []).push([["main"],{

/***/ "./node_modules/css-loader/dist/cjs.js!./src/styles.css":
/*!**************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/styles.css ***!
  \**************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/sourceMaps.js */ "./node_modules/css-loader/dist/runtime/sourceMaps.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, "html, body {\n  width: 100%;\n  height: 100%;\n}\n\nbody {\n  margin: 0;\n}\n\n.canvas {\n  width: 100%;\n  height: 100%;\n}", "",{"version":3,"sources":["webpack://./src/styles.css"],"names":[],"mappings":"AAAA;EACE,WAAW;EACX,YAAY;AACd;;AAEA;EACE,SAAS;AACX;;AAEA;EACE,WAAW;EACX,YAAY;AACd","sourcesContent":["html, body {\n  width: 100%;\n  height: 100%;\n}\n\nbody {\n  margin: 0;\n}\n\n.canvas {\n  width: 100%;\n  height: 100%;\n}"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./src/styles.css":
/*!************************!*\
  !*** ./src/styles.css ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleDomAPI.js */ "./node_modules/style-loader/dist/runtime/styleDomAPI.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertBySelector.js */ "./node_modules/style-loader/dist/runtime/insertBySelector.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertStyleElement.js */ "./node_modules/style-loader/dist/runtime/insertStyleElement.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleTagTransform.js */ "./node_modules/style-loader/dist/runtime/styleTagTransform.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_styles_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../node_modules/css-loader/dist/cjs.js!./styles.css */ "./node_modules/css-loader/dist/cjs.js!./src/styles.css");

      
      
      
      
      
      
      
      
      

var options = {};

options.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());
options.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());

      options.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");
    
options.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());
options.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_styles_css__WEBPACK_IMPORTED_MODULE_6__["default"], options);




       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_styles_css__WEBPACK_IMPORTED_MODULE_6__["default"] && _node_modules_css_loader_dist_cjs_js_styles_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals ? _node_modules_css_loader_dist_cjs_js_styles_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals : undefined);


/***/ }),

/***/ "./src/config.ts":
/*!***********************!*\
  !*** ./src/config.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    pixelRatio: window.devicePixelRatio,
    antialias: true,
    backgroundColor: 0x303030,
    shadowsEnabled: false,
});


/***/ }),

/***/ "./src/helpers/infiniteGridHelper.ts":
/*!*******************************************!*\
  !*** ./src/helpers/infiniteGridHelper.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ "./node_modules/three/build/three.module.js");

// Infinite grid
var color = new three__WEBPACK_IMPORTED_MODULE_0__.Color('white');
var size1 = 10;
var size2 = 100;
var distance = 400;
var axes = 'xzy';
var planeAxes = axes.substr(0, 2);
var geometry = new three__WEBPACK_IMPORTED_MODULE_0__.PlaneBufferGeometry(2, 2, 1, 1);
var material = new three__WEBPACK_IMPORTED_MODULE_0__.ShaderMaterial({
    side: three__WEBPACK_IMPORTED_MODULE_0__.DoubleSide,
    uniforms: {
        uSize1: {
            value: size1
        },
        uSize2: {
            value: size2
        },
        uColor: {
            value: color
        },
        uDistance: {
            value: distance
        }
    },
    transparent: true,
    vertexShader: "\n    varying vec3 worldPosition;\n    uniform float uDistance;\n\n    void main() {\n      vec3 pos = position.".concat(axes, " * uDistance;\n      pos.").concat(planeAxes, " += cameraPosition.").concat(planeAxes, ";\n      worldPosition = pos;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n    }\n  "),
    fragmentShader: "\n    varying vec3 worldPosition;\n    uniform float uSize1;\n    uniform float uSize2;\n    uniform vec3 uColor;\n    uniform float uDistance;\n\n    float getGrid(float size) {      \n      vec2 r = worldPosition.".concat(planeAxes, " / size;\n      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);\n      float line = min(grid.x, grid.y);\n      return 1.0 - min(line, 1.0);\n    }\n    \n    void main() {\n      float d = 1.0 - min(distance(cameraPosition.").concat(planeAxes, ", worldPosition.").concat(planeAxes, ") / uDistance, 1.0);\n      float g1 = getGrid(uSize1);\n      float g2 = getGrid(uSize2);\n      gl_FragColor = vec4(uColor.rgb, mix(g2, g1, g1) * pow(d, 3.0));\n      gl_FragColor.a = mix(0.5 * gl_FragColor.a, gl_FragColor.a, g2);\n      if ( gl_FragColor.a <= 0.0 ) discard;\n    }     \n  "),
    extensions: {
        derivatives: true
    }
});
var mesh = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, material);
mesh.frustumCulled = false;
mesh.layers.set(31);
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (mesh);


/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _styles_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./styles.css */ "./src/styles.css");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config */ "./src/config.ts");
/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! three */ "./node_modules/three/build/three.module.js");
/* harmony import */ var three_examples_jsm_controls_OrbitControls__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three/examples/jsm/controls/OrbitControls */ "./node_modules/three/examples/jsm/controls/OrbitControls.js");
/* harmony import */ var three_examples_jsm_controls_TransformControls__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three/examples/jsm/controls/TransformControls */ "./node_modules/three/examples/jsm/controls/TransformControls.js");
/* harmony import */ var three_examples_jsm_postprocessing_EffectComposer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! three/examples/jsm/postprocessing/EffectComposer */ "./node_modules/three/examples/jsm/postprocessing/EffectComposer.js");
/* harmony import */ var three_examples_jsm_postprocessing_RenderPass__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! three/examples/jsm/postprocessing/RenderPass */ "./node_modules/three/examples/jsm/postprocessing/RenderPass.js");
/* harmony import */ var three_examples_jsm_postprocessing_OutlinePass__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! three/examples/jsm/postprocessing/OutlinePass */ "./node_modules/three/examples/jsm/postprocessing/OutlinePass.js");
/* harmony import */ var three_examples_jsm_libs_stats_module_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! three/examples/jsm/libs/stats.module.js */ "./node_modules/three/examples/jsm/libs/stats.module.js");
/* harmony import */ var tweakpane__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! tweakpane */ "./node_modules/tweakpane/dist/tweakpane.js");
/* harmony import */ var tweakpane__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(tweakpane__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _renderer__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./renderer */ "./src/renderer.ts");
/* harmony import */ var helpers_infiniteGridHelper__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! helpers/infiniteGridHelper */ "./src/helpers/infiniteGridHelper.ts");












// Prepare scene
var scene = new three__WEBPACK_IMPORTED_MODULE_11__.Scene();
// Prepare camera
var camera = new three__WEBPACK_IMPORTED_MODULE_11__.PerspectiveCamera(75, _renderer__WEBPACK_IMPORTED_MODULE_9__["default"].domElement.width / _renderer__WEBPACK_IMPORTED_MODULE_9__["default"].domElement.height, 0.01, 1000);
camera.position.x = 5;
camera.position.y = 3;
camera.position.z = 5;
camera.layers.enable(31);
// Add infinite grid helper
scene.add(helpers_infiniteGridHelper__WEBPACK_IMPORTED_MODULE_10__["default"]);
// Prepare lights
var ambientLight = new three__WEBPACK_IMPORTED_MODULE_11__.AmbientLight(0xffffff, 0.3);
scene.add(ambientLight);
var directionalLight = new three__WEBPACK_IMPORTED_MODULE_11__.DirectionalLight(0xffffff, 0.5);
directionalLight.position.set(-15, 50, -35);
scene.add(directionalLight);
// Add some simple geometry
for (var i = 0; i < 10; i++) {
    var cube = new three__WEBPACK_IMPORTED_MODULE_11__.Mesh(new three__WEBPACK_IMPORTED_MODULE_11__.BoxGeometry(1, 1, 1), new three__WEBPACK_IMPORTED_MODULE_11__.MeshPhongMaterial());
    cube.position.set((Math.random() * 20) - 10, 0, (Math.random() * 20) - 10);
    cube.layers.enable(1);
    scene.add(cube);
}
// Prepare controls
// Transform controls to make live transformations to objects
var transformControls = new three_examples_jsm_controls_TransformControls__WEBPACK_IMPORTED_MODULE_3__.TransformControls(camera, _renderer__WEBPACK_IMPORTED_MODULE_9__["default"].domElement);
transformControls.setSize(0.8);
transformControls.layers.set(31);
transformControls.traverse(function (obj) {
    // @ts-ignore
    obj.isTransformControls = true;
});
scene.add(transformControls);
// Change transformation mode on keys
window.addEventListener('keydown', function (event) {
    switch (event.key) {
        case 'w':
            transformControls.setMode('translate');
            break;
        case 'e':
            transformControls.setMode('rotate');
            break;
        case 'r':
            transformControls.setMode('scale');
            break;
    }
});
// Disable orbit controls while using transform controls
transformControls.addEventListener('dragging-changed', function (event) {
    orbitControls.enabled = !event.value;
});
// Orbit control for camera rotation
var orbitControls = new three_examples_jsm_controls_OrbitControls__WEBPACK_IMPORTED_MODULE_2__.OrbitControls(camera, _renderer__WEBPACK_IMPORTED_MODULE_9__["default"].domElement);
orbitControls.enableDamping = true;
// Post-Processing
var composer = new three_examples_jsm_postprocessing_EffectComposer__WEBPACK_IMPORTED_MODULE_4__.EffectComposer(_renderer__WEBPACK_IMPORTED_MODULE_9__["default"]);
var renderPass = new three_examples_jsm_postprocessing_RenderPass__WEBPACK_IMPORTED_MODULE_5__.RenderPass(scene, camera);
composer.addPass(renderPass);
var outlinePass = new three_examples_jsm_postprocessing_OutlinePass__WEBPACK_IMPORTED_MODULE_6__.OutlinePass(new three__WEBPACK_IMPORTED_MODULE_11__.Vector2(_renderer__WEBPACK_IMPORTED_MODULE_9__["default"].domElement.width, _renderer__WEBPACK_IMPORTED_MODULE_9__["default"].domElement.height), scene, camera);
composer.addPass(outlinePass);
outlinePass.selectedObjects = [];
outlinePass.visibleEdgeColor.set(0xffffff);
outlinePass.hiddenEdgeColor.set(0xffffff);
outlinePass.edgeStrength = 5;
// Controls
// Mouse picking controls
var mouse = new three__WEBPACK_IMPORTED_MODULE_11__.Vector2();
var mouseTargetObject = null;
var raycaster = new three__WEBPACK_IMPORTED_MODULE_11__.Raycaster();
raycaster.layers.set(1);
// Calculate mouse position in normalized device coordinates
// (-1 to +1) for both components
function handleMouseMove(event) {
    mouse.x = 2 * (event.clientX / _renderer__WEBPACK_IMPORTED_MODULE_9__["default"].domElement.clientWidth) - 1;
    mouse.y = 1 - 2 * (event.clientY / _renderer__WEBPACK_IMPORTED_MODULE_9__["default"].domElement.clientHeight);
    checkIntersection();
    setHoveredObject(mouseTargetObject);
}
function checkIntersection() {
    raycaster.setFromCamera(mouse, camera);
    var intersects = raycaster.intersectObjects(scene.children);
    var selectedObject = null;
    if (intersects.length > 0) {
        intersects.sort(function (a, b) { return a.distance - b.distance; });
        selectedObject = intersects[0].object;
    }
    mouseTargetObject = selectedObject;
}
function setHoveredObject(object) {
    outlinePass.selectedObjects = object ? [object] : [];
}
function handleMouseClick(event) {
    if (!allowMouseClick)
        return;
    if (mouseTargetObject) {
        transformControls.attach(mouseTargetObject);
        var object_1 = scene.getObjectById(mouseTargetObject.id);
        console.log(object_1);
        var PARAMS_1 = {
            positionX: object_1.position.x,
            positionY: object_1.position.y,
            positionZ: object_1.position.z,
            scaleX: object_1.scale.x,
            scaleY: object_1.scale.y,
            scaleZ: object_1.scale.z,
            rotationX: object_1.rotation.x,
            rotationY: object_1.rotation.y,
            rotationZ: object_1.rotation.z,
            // @ts-ignore
            color: object_1.material.color.getHex()
        };
        if (objectPane)
            objectPane.dispose();
        objectPane = pane.addFolder({ title: 'Object' });
        var transformPane = objectPane.addFolder({ title: 'Transform' });
        var positionPane = transformPane.addFolder({ title: 'Position' });
        positionPane.addInput(PARAMS_1, 'positionX', { label: 'x' }).on('change', function () { return object_1.position.x = PARAMS_1.positionX; });
        positionPane.addInput(PARAMS_1, 'positionY', { label: 'y' }).on('change', function () { return object_1.position.y = PARAMS_1.positionY; });
        positionPane.addInput(PARAMS_1, 'positionZ', { label: 'z' }).on('change', function () { return object_1.position.z = PARAMS_1.positionZ; });
        var scalePane = transformPane.addFolder({ title: 'Scale' });
        scalePane.addInput(PARAMS_1, 'scaleX', { label: 'x' }).on('change', function () { return object_1.scale.x = PARAMS_1.scaleX; });
        scalePane.addInput(PARAMS_1, 'scaleY', { label: 'y' }).on('change', function () { return object_1.scale.y = PARAMS_1.scaleY; });
        scalePane.addInput(PARAMS_1, 'scaleZ', { label: 'z' }).on('change', function () { return object_1.scale.z = PARAMS_1.scaleZ; });
        var rotationPane = transformPane.addFolder({ title: 'Rotation' });
        rotationPane.addInput(PARAMS_1, 'rotationX', { label: 'x' }).on('change', function () { return object_1.rotation.x = PARAMS_1.rotationX; });
        rotationPane.addInput(PARAMS_1, 'rotationY', { label: 'y' }).on('change', function () { return object_1.rotation.y = PARAMS_1.rotationY; });
        rotationPane.addInput(PARAMS_1, 'rotationZ', { label: 'z' }).on('change', function () { return object_1.rotation.z = PARAMS_1.rotationZ; });
        var materialPane = objectPane.addFolder({ title: 'Material' });
        // @ts-ignore
        materialPane.addInput(PARAMS_1, 'color', { label: 'Color', view: 'color' }).on('change', function () { return object_1.material.color.setHex(PARAMS_1.color); });
    }
    else {
        transformControls.detach();
        objectPane.dispose();
    }
}
// Events to check if click has been held to prevent drag clicks
var allowMouseClick = true;
var mouseDownTime;
var mouseUpTime;
function handleMouseDown() {
    mouseDownTime = performance.now();
}
function handleMouseUp() {
    mouseUpTime = performance.now();
    var elapsedTime = mouseUpTime - mouseDownTime;
    allowMouseClick = elapsedTime < 250;
}
window.addEventListener('mousemove', handleMouseMove, false);
_renderer__WEBPACK_IMPORTED_MODULE_9__["default"].domElement.addEventListener('mousedown', handleMouseDown, false);
_renderer__WEBPACK_IMPORTED_MODULE_9__["default"].domElement.addEventListener('mouseup', handleMouseUp, false);
_renderer__WEBPACK_IMPORTED_MODULE_9__["default"].domElement.addEventListener('click', handleMouseClick, false);
// Add stats
// @ts-ignore
var stats = new three_examples_jsm_libs_stats_module_js__WEBPACK_IMPORTED_MODULE_7__["default"]();
stats.showPanel(0);
document.body.appendChild(stats.dom);
// Animation loop
function render() {
    requestAnimationFrame(render);
    stats.begin();
    resizeCanvasToDisplaySize();
    orbitControls.update();
    // renderer.render(scene, camera);
    composer.render();
    stats.end();
}
// TESTING TWEAKPANE
var PARAMS = {
    background: _config__WEBPACK_IMPORTED_MODULE_1__["default"].backgroundColor
};
var pane = new tweakpane__WEBPACK_IMPORTED_MODULE_8__.Pane();
pane.addInput(PARAMS, 'background', { view: 'color' }).on('change', function () { return _renderer__WEBPACK_IMPORTED_MODULE_9__["default"].setClearColor(PARAMS.background); });
var objectPane;
render();
// Utilities
function resizeCanvasToDisplaySize() {
    var canvas = _renderer__WEBPACK_IMPORTED_MODULE_9__["default"].domElement;
    var width = canvas.clientWidth;
    var height = canvas.clientHeight;
    if (canvas.width !== width || canvas.height !== height) {
        camera.aspect = width / height;
        camera.updateProjectionMatrix();
        _renderer__WEBPACK_IMPORTED_MODULE_9__["default"].setSize(Math.floor(width * _config__WEBPACK_IMPORTED_MODULE_1__["default"].pixelRatio), Math.floor(height * _config__WEBPACK_IMPORTED_MODULE_1__["default"].pixelRatio), false);
    }
}


/***/ }),

/***/ "./src/renderer.ts":
/*!*************************!*\
  !*** ./src/renderer.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ "./src/config.ts");
/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! three */ "./node_modules/three/build/three.module.js");


// Change config
// config.pixelRatio = 1;
// config.antialias = false;
// Get canvas
var canvas = document.querySelector('#js-canvas');
// Prepare renderer
var renderer = new three__WEBPACK_IMPORTED_MODULE_1__.WebGLRenderer({
    canvas: canvas,
    antialias: _config__WEBPACK_IMPORTED_MODULE_0__["default"].antialias,
    powerPreference: 'high-performance'
});
renderer.setSize(Math.floor(canvas.clientWidth * _config__WEBPACK_IMPORTED_MODULE_0__["default"].pixelRatio), Math.floor(canvas.clientHeight * _config__WEBPACK_IMPORTED_MODULE_0__["default"].pixelRatio), false);
renderer.outputEncoding = three__WEBPACK_IMPORTED_MODULE_1__.sRGBEncoding;
renderer.toneMapping = three__WEBPACK_IMPORTED_MODULE_1__.ACESFilmicToneMapping;
renderer.setClearColor(_config__WEBPACK_IMPORTED_MODULE_0__["default"].backgroundColor);
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (renderer);


/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["vendors"], () => (__webpack_exec__("./src/index.ts")));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxLQUFLLEtBQUssS0FBSyxJQUFJLE1BQU0sQ0FBQyxNQUFNLEtBQUssTUFBTSxFQUFFO1FBQ3RELE1BQU0sQ0FBQyxNQUFNLEdBQUcsS0FBSyxHQUFHLE1BQU0sQ0FBQztRQUMvQixNQUFNLENBQUMsc0JBQXNCLEVBQUUsQ0FBQztRQUNoQyx5REFBZ0IsQ0FDZCxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRywwREFBaUIsQ0FBQyxFQUNyQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRywwREFBaUIsQ0FBQyxFQUN0QyxLQUFLLENBQ04sQ0FBQztLQUNIO0FBQ0gsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNyUzZCO0FBQ0M7QUFFL0IsZ0JBQWdCO0FBQ2hCLHlCQUF5QjtBQUN6Qiw0QkFBNEI7QUFFNUIsYUFBYTtBQUNiLElBQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFzQixDQUFDO0FBRXpFLG1CQUFtQjtBQUNuQixJQUFNLFFBQVEsR0FBRyxJQUFJLGdEQUFtQixDQUFDO0lBQ3ZDLE1BQU07SUFDTixTQUFTLEVBQUUseURBQWdCO0lBQzNCLGVBQWUsRUFBRSxrQkFBa0I7Q0FDcEMsQ0FBQyxDQUFDO0FBQ0gsUUFBUSxDQUFDLE9BQU8sQ0FDZCxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxXQUFXLEdBQUcsMERBQWlCLENBQUMsRUFDbEQsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsWUFBWSxHQUFHLDBEQUFpQixDQUFDLEVBQ25ELEtBQUssQ0FDTixDQUFDO0FBQ0YsUUFBUSxDQUFDLGNBQWMsR0FBRywrQ0FBa0IsQ0FBQztBQUM3QyxRQUFRLENBQUMsV0FBVyxHQUFHLHdEQUEyQixDQUFDO0FBQ25ELFFBQVEsQ0FBQyxhQUFhLENBQUMsK0RBQXNCLENBQUMsQ0FBQztBQUUvQyxpRUFBZSxRQUFRLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sb2FkZWQtc2NlbmUtZWRpdG9yLy4vc3JjL3N0eWxlcy5jc3MiLCJ3ZWJwYWNrOi8vbG9hZGVkLXNjZW5lLWVkaXRvci8uL3NyYy9zdHlsZXMuY3NzPzQ0YjIiLCJ3ZWJwYWNrOi8vbG9hZGVkLXNjZW5lLWVkaXRvci8uL3NyYy9jb25maWcudHMiLCJ3ZWJwYWNrOi8vbG9hZGVkLXNjZW5lLWVkaXRvci8uL3NyYy9oZWxwZXJzL2luZmluaXRlR3JpZEhlbHBlci50cyIsIndlYnBhY2s6Ly9sb2FkZWQtc2NlbmUtZWRpdG9yLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL2xvYWRlZC1zY2VuZS1lZGl0b3IvLi9zcmMvcmVuZGVyZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0c1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18gZnJvbSBcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIGZyb20gXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCI7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyk7XG4vLyBNb2R1bGVcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLnB1c2goW21vZHVsZS5pZCwgXCJodG1sLCBib2R5IHtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgaGVpZ2h0OiAxMDAlO1xcbn1cXG5cXG5ib2R5IHtcXG4gIG1hcmdpbjogMDtcXG59XFxuXFxuLmNhbnZhcyB7XFxuICB3aWR0aDogMTAwJTtcXG4gIGhlaWdodDogMTAwJTtcXG59XCIsIFwiXCIse1widmVyc2lvblwiOjMsXCJzb3VyY2VzXCI6W1wid2VicGFjazovLy4vc3JjL3N0eWxlcy5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtBQUNkOztBQUVBO0VBQ0UsU0FBUztBQUNYOztBQUVBO0VBQ0UsV0FBVztFQUNYLFlBQVk7QUFDZFwiLFwic291cmNlc0NvbnRlbnRcIjpbXCJodG1sLCBib2R5IHtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgaGVpZ2h0OiAxMDAlO1xcbn1cXG5cXG5ib2R5IHtcXG4gIG1hcmdpbjogMDtcXG59XFxuXFxuLmNhbnZhcyB7XFxuICB3aWR0aDogMTAwJTtcXG4gIGhlaWdodDogMTAwJTtcXG59XCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiIsIlxuICAgICAgaW1wb3J0IEFQSSBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiO1xuICAgICAgaW1wb3J0IGRvbUFQSSBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0Rm4gZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzXCI7XG4gICAgICBpbXBvcnQgc2V0QXR0cmlidXRlcyBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydFN0eWxlRWxlbWVudCBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qc1wiO1xuICAgICAgaW1wb3J0IHN0eWxlVGFnVHJhbnNmb3JtRm4gZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qc1wiO1xuICAgICAgaW1wb3J0IGNvbnRlbnQsICogYXMgbmFtZWRFeHBvcnQgZnJvbSBcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9zdHlsZXMuY3NzXCI7XG4gICAgICBcbiAgICAgIFxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtID0gc3R5bGVUYWdUcmFuc2Zvcm1Gbjtcbm9wdGlvbnMuc2V0QXR0cmlidXRlcyA9IHNldEF0dHJpYnV0ZXM7XG5cbiAgICAgIG9wdGlvbnMuaW5zZXJ0ID0gaW5zZXJ0Rm4uYmluZChudWxsLCBcImhlYWRcIik7XG4gICAgXG5vcHRpb25zLmRvbUFQSSA9IGRvbUFQSTtcbm9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50ID0gaW5zZXJ0U3R5bGVFbGVtZW50O1xuXG52YXIgdXBkYXRlID0gQVBJKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0ICogZnJvbSBcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9zdHlsZXMuY3NzXCI7XG4gICAgICAgZXhwb3J0IGRlZmF1bHQgY29udGVudCAmJiBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDogdW5kZWZpbmVkO1xuIiwiZXhwb3J0IGRlZmF1bHQge1xuICBwaXhlbFJhdGlvOiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyxcbiAgYW50aWFsaWFzOiB0cnVlLFxuICBiYWNrZ3JvdW5kQ29sb3I6IDB4MzAzMDMwLFxuICBzaGFkb3dzRW5hYmxlZDogZmFsc2UsXG59IiwiaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnO1xuXG4vLyBJbmZpbml0ZSBncmlkXG5jb25zdCBjb2xvciA9IG5ldyBUSFJFRS5Db2xvciggJ3doaXRlJyApO1xuY29uc3Qgc2l6ZTEgPSAxMDtcbmNvbnN0IHNpemUyID0gMTAwO1xuY29uc3QgZGlzdGFuY2UgPSA0MDA7XG5jb25zdCBheGVzID0gJ3h6eSc7XG5jb25zdCBwbGFuZUF4ZXMgPSBheGVzLnN1YnN0cigwLCAyKTtcblxuY29uc3QgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuUGxhbmVCdWZmZXJHZW9tZXRyeSgyLCAyLCAxLCAxKTtcbmNvbnN0IG1hdGVyaWFsID0gbmV3IFRIUkVFLlNoYWRlck1hdGVyaWFsKHtcbiAgc2lkZTogVEhSRUUuRG91YmxlU2lkZSxcbiAgdW5pZm9ybXM6IHtcbiAgICB1U2l6ZTE6IHtcbiAgICAgIHZhbHVlOiBzaXplMVxuICAgIH0sXG4gICAgdVNpemUyOiB7XG4gICAgICB2YWx1ZTogc2l6ZTJcbiAgICB9LFxuICAgIHVDb2xvcjoge1xuICAgICAgdmFsdWU6IGNvbG9yXG4gICAgfSxcbiAgICB1RGlzdGFuY2U6IHtcbiAgICAgIHZhbHVlOiBkaXN0YW5jZVxuICAgIH1cbiAgfSxcbiAgdHJhbnNwYXJlbnQ6IHRydWUsXG4gIHZlcnRleFNoYWRlcjogYFxuICAgIHZhcnlpbmcgdmVjMyB3b3JsZFBvc2l0aW9uO1xuICAgIHVuaWZvcm0gZmxvYXQgdURpc3RhbmNlO1xuXG4gICAgdm9pZCBtYWluKCkge1xuICAgICAgdmVjMyBwb3MgPSBwb3NpdGlvbi4ke2F4ZXN9ICogdURpc3RhbmNlO1xuICAgICAgcG9zLiR7cGxhbmVBeGVzfSArPSBjYW1lcmFQb3NpdGlvbi4ke3BsYW5lQXhlc307XG4gICAgICB3b3JsZFBvc2l0aW9uID0gcG9zO1xuICAgICAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNChwb3MsIDEuMCk7XG4gICAgfVxuICBgLFxuICBmcmFnbWVudFNoYWRlcjogYFxuICAgIHZhcnlpbmcgdmVjMyB3b3JsZFBvc2l0aW9uO1xuICAgIHVuaWZvcm0gZmxvYXQgdVNpemUxO1xuICAgIHVuaWZvcm0gZmxvYXQgdVNpemUyO1xuICAgIHVuaWZvcm0gdmVjMyB1Q29sb3I7XG4gICAgdW5pZm9ybSBmbG9hdCB1RGlzdGFuY2U7XG5cbiAgICBmbG9hdCBnZXRHcmlkKGZsb2F0IHNpemUpIHsgICAgICBcbiAgICAgIHZlYzIgciA9IHdvcmxkUG9zaXRpb24uJHtwbGFuZUF4ZXN9IC8gc2l6ZTtcbiAgICAgIHZlYzIgZ3JpZCA9IGFicyhmcmFjdChyIC0gMC41KSAtIDAuNSkgLyBmd2lkdGgocik7XG4gICAgICBmbG9hdCBsaW5lID0gbWluKGdyaWQueCwgZ3JpZC55KTtcbiAgICAgIHJldHVybiAxLjAgLSBtaW4obGluZSwgMS4wKTtcbiAgICB9XG4gICAgXG4gICAgdm9pZCBtYWluKCkge1xuICAgICAgZmxvYXQgZCA9IDEuMCAtIG1pbihkaXN0YW5jZShjYW1lcmFQb3NpdGlvbi4ke3BsYW5lQXhlc30sIHdvcmxkUG9zaXRpb24uJHtwbGFuZUF4ZXN9KSAvIHVEaXN0YW5jZSwgMS4wKTtcbiAgICAgIGZsb2F0IGcxID0gZ2V0R3JpZCh1U2l6ZTEpO1xuICAgICAgZmxvYXQgZzIgPSBnZXRHcmlkKHVTaXplMik7XG4gICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHVDb2xvci5yZ2IsIG1peChnMiwgZzEsIGcxKSAqIHBvdyhkLCAzLjApKTtcbiAgICAgIGdsX0ZyYWdDb2xvci5hID0gbWl4KDAuNSAqIGdsX0ZyYWdDb2xvci5hLCBnbF9GcmFnQ29sb3IuYSwgZzIpO1xuICAgICAgaWYgKCBnbF9GcmFnQ29sb3IuYSA8PSAwLjAgKSBkaXNjYXJkO1xuICAgIH0gICAgIFxuICBgLFxuICBleHRlbnNpb25zOiB7XG4gICAgZGVyaXZhdGl2ZXM6IHRydWVcbiAgfVxufSk7XG5cbmNvbnN0IG1lc2ggPSBuZXcgVEhSRUUuTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwpO1xubWVzaC5mcnVzdHVtQ3VsbGVkID0gZmFsc2U7XG5tZXNoLmxheWVycy5zZXQoMzEpO1xuXG5leHBvcnQgZGVmYXVsdCBtZXNoOyIsImltcG9ydCAnLi9zdHlsZXMuY3NzJztcbmltcG9ydCBjb25maWcgZnJvbSAnLi9jb25maWcnO1xuXG5pbXBvcnQgKiBhcyBUSFJFRSBmcm9tICd0aHJlZSc7XG5pbXBvcnQgeyBPcmJpdENvbnRyb2xzIH0gZnJvbSAndGhyZWUvZXhhbXBsZXMvanNtL2NvbnRyb2xzL09yYml0Q29udHJvbHMnO1xuaW1wb3J0IHsgVHJhbnNmb3JtQ29udHJvbHMgfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vY29udHJvbHMvVHJhbnNmb3JtQ29udHJvbHMnO1xuXG5pbXBvcnQgeyBFZmZlY3RDb21wb3NlciB9IGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9wb3N0cHJvY2Vzc2luZy9FZmZlY3RDb21wb3Nlcic7XG5pbXBvcnQgeyBSZW5kZXJQYXNzIH0gZnJvbSAndGhyZWUvZXhhbXBsZXMvanNtL3Bvc3Rwcm9jZXNzaW5nL1JlbmRlclBhc3MnO1xuaW1wb3J0IHsgT3V0bGluZVBhc3MgfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vcG9zdHByb2Nlc3NpbmcvT3V0bGluZVBhc3MnO1xuaW1wb3J0IFN0YXRzIGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9saWJzL3N0YXRzLm1vZHVsZS5qcyc7XG5cbmltcG9ydCB7IFBhbmUsIEZvbGRlckFwaSB9IGZyb20gJ3R3ZWFrcGFuZSc7XG5cbmltcG9ydCByZW5kZXJlciBmcm9tICcuL3JlbmRlcmVyJztcbmltcG9ydCBpbmZpbml0ZUdyaWRIZWxwZXIgZnJvbSAnaGVscGVycy9pbmZpbml0ZUdyaWRIZWxwZXInO1xuXG5cblxuLy8gUHJlcGFyZSBzY2VuZVxuY29uc3Qgc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTtcblxuXG5cblxuLy8gUHJlcGFyZSBjYW1lcmFcbmNvbnN0IGNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg3NSwgcmVuZGVyZXIuZG9tRWxlbWVudC53aWR0aCAvIHJlbmRlcmVyLmRvbUVsZW1lbnQuaGVpZ2h0LCAwLjAxLCAxMDAwKTtcbmNhbWVyYS5wb3NpdGlvbi54ID0gNTtcbmNhbWVyYS5wb3NpdGlvbi55ID0gMztcbmNhbWVyYS5wb3NpdGlvbi56ID0gNTtcbmNhbWVyYS5sYXllcnMuZW5hYmxlKDMxKTtcblxuXG5cblxuLy8gQWRkIGluZmluaXRlIGdyaWQgaGVscGVyXG5zY2VuZS5hZGQoaW5maW5pdGVHcmlkSGVscGVyKTtcblxuXG5cblxuLy8gUHJlcGFyZSBsaWdodHNcbmNvbnN0IGFtYmllbnRMaWdodCA9IG5ldyBUSFJFRS5BbWJpZW50TGlnaHQoMHhmZmZmZmYsIDAuMyk7XG5zY2VuZS5hZGQoYW1iaWVudExpZ2h0KTtcbmNvbnN0IGRpcmVjdGlvbmFsTGlnaHQgPSBuZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCgweGZmZmZmZiwgMC41KTtcbmRpcmVjdGlvbmFsTGlnaHQucG9zaXRpb24uc2V0KC0xNSwgNTAsIC0zNSk7XG5zY2VuZS5hZGQoZGlyZWN0aW9uYWxMaWdodCk7XG5cblxuXG5cbi8vIEFkZCBzb21lIHNpbXBsZSBnZW9tZXRyeVxuZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gIGNvbnN0IGN1YmUgPSBuZXcgVEhSRUUuTWVzaChcbiAgICBuZXcgVEhSRUUuQm94R2VvbWV0cnkoMSwgMSwgMSksXG4gICAgbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKClcbiAgKTtcbiAgY3ViZS5wb3NpdGlvbi5zZXQoXG4gICAgKE1hdGgucmFuZG9tKCkgKiAyMCkgLSAxMCxcbiAgICAwLFxuICAgIChNYXRoLnJhbmRvbSgpICogMjApIC0gMTBcbiAgKTtcbiAgY3ViZS5sYXllcnMuZW5hYmxlKDEpO1xuICBzY2VuZS5hZGQoY3ViZSk7XG59XG5cblxuLy8gUHJlcGFyZSBjb250cm9sc1xuLy8gVHJhbnNmb3JtIGNvbnRyb2xzIHRvIG1ha2UgbGl2ZSB0cmFuc2Zvcm1hdGlvbnMgdG8gb2JqZWN0c1xuY29uc3QgdHJhbnNmb3JtQ29udHJvbHMgPSBuZXcgVHJhbnNmb3JtQ29udHJvbHMoY2FtZXJhLCByZW5kZXJlci5kb21FbGVtZW50KTtcbnRyYW5zZm9ybUNvbnRyb2xzLnNldFNpemUoMC44KTtcbnRyYW5zZm9ybUNvbnRyb2xzLmxheWVycy5zZXQoMzEpO1xudHJhbnNmb3JtQ29udHJvbHMudHJhdmVyc2UoKG9iaikgPT4geyAvLyBUbyBiZSBkZXRlY3RlZCBjb3JyZWN0bHkgYnkgT3V0bGluZVBhc3MuXG4gIC8vIEB0cy1pZ25vcmVcbiAgb2JqLmlzVHJhbnNmb3JtQ29udHJvbHMgPSB0cnVlO1xufSk7XG5zY2VuZS5hZGQodHJhbnNmb3JtQ29udHJvbHMpO1xuXG4vLyBDaGFuZ2UgdHJhbnNmb3JtYXRpb24gbW9kZSBvbiBrZXlzXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIChldmVudCkge1xuICBzd2l0Y2ggKGV2ZW50LmtleSkge1xuICAgIGNhc2UgJ3cnOlxuICAgICAgdHJhbnNmb3JtQ29udHJvbHMuc2V0TW9kZSgndHJhbnNsYXRlJyk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdlJzpcbiAgICAgIHRyYW5zZm9ybUNvbnRyb2xzLnNldE1vZGUoJ3JvdGF0ZScpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAncic6XG4gICAgICB0cmFuc2Zvcm1Db250cm9scy5zZXRNb2RlKCdzY2FsZScpO1xuICAgICAgYnJlYWs7XG4gIH1cbn0pO1xuXG4vLyBEaXNhYmxlIG9yYml0IGNvbnRyb2xzIHdoaWxlIHVzaW5nIHRyYW5zZm9ybSBjb250cm9sc1xudHJhbnNmb3JtQ29udHJvbHMuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2dpbmctY2hhbmdlZCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gIG9yYml0Q29udHJvbHMuZW5hYmxlZCA9ICFldmVudC52YWx1ZTtcbn0pO1xuXG4vLyBPcmJpdCBjb250cm9sIGZvciBjYW1lcmEgcm90YXRpb25cbmNvbnN0IG9yYml0Q29udHJvbHMgPSBuZXcgT3JiaXRDb250cm9scyhjYW1lcmEsIHJlbmRlcmVyLmRvbUVsZW1lbnQpO1xub3JiaXRDb250cm9scy5lbmFibGVEYW1waW5nID0gdHJ1ZTtcblxuXG5cblxuXG4vLyBQb3N0LVByb2Nlc3NpbmdcbmNvbnN0IGNvbXBvc2VyID0gbmV3IEVmZmVjdENvbXBvc2VyKHJlbmRlcmVyKTtcblxuY29uc3QgcmVuZGVyUGFzcyA9IG5ldyBSZW5kZXJQYXNzKHNjZW5lLCBjYW1lcmEpO1xuY29tcG9zZXIuYWRkUGFzcyhyZW5kZXJQYXNzKTtcblxuY29uc3Qgb3V0bGluZVBhc3MgPSBuZXcgT3V0bGluZVBhc3MobmV3IFRIUkVFLlZlY3RvcjIocmVuZGVyZXIuZG9tRWxlbWVudC53aWR0aCwgcmVuZGVyZXIuZG9tRWxlbWVudC5oZWlnaHQpLCBzY2VuZSwgY2FtZXJhKTtcbmNvbXBvc2VyLmFkZFBhc3Mob3V0bGluZVBhc3MpO1xub3V0bGluZVBhc3Muc2VsZWN0ZWRPYmplY3RzID0gW107XG5vdXRsaW5lUGFzcy52aXNpYmxlRWRnZUNvbG9yLnNldCgweGZmZmZmZik7XG5vdXRsaW5lUGFzcy5oaWRkZW5FZGdlQ29sb3Iuc2V0KDB4ZmZmZmZmKTtcbm91dGxpbmVQYXNzLmVkZ2VTdHJlbmd0aCA9IDU7XG5cblxuXG5cbi8vIENvbnRyb2xzXG5cbi8vIE1vdXNlIHBpY2tpbmcgY29udHJvbHNcbmNvbnN0IG1vdXNlID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcbmxldCBtb3VzZVRhcmdldE9iamVjdDogYW55ID0gbnVsbDtcbmNvbnN0IHJheWNhc3RlciA9IG5ldyBUSFJFRS5SYXljYXN0ZXIoKTtcbnJheWNhc3Rlci5sYXllcnMuc2V0KDEpO1xuXG4vLyBDYWxjdWxhdGUgbW91c2UgcG9zaXRpb24gaW4gbm9ybWFsaXplZCBkZXZpY2UgY29vcmRpbmF0ZXNcbi8vICgtMSB0byArMSkgZm9yIGJvdGggY29tcG9uZW50c1xuZnVuY3Rpb24gaGFuZGxlTW91c2VNb3ZlKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gIG1vdXNlLnggPSAyICogKGV2ZW50LmNsaWVudFggLyByZW5kZXJlci5kb21FbGVtZW50LmNsaWVudFdpZHRoKSAtIDE7XG4gIG1vdXNlLnkgPSAxIC0gMiAqIChldmVudC5jbGllbnRZIC8gcmVuZGVyZXIuZG9tRWxlbWVudC5jbGllbnRIZWlnaHQpO1xuXG4gIGNoZWNrSW50ZXJzZWN0aW9uKCk7XG4gIHNldEhvdmVyZWRPYmplY3QobW91c2VUYXJnZXRPYmplY3QpO1xufVxuXG5mdW5jdGlvbiBjaGVja0ludGVyc2VjdGlvbigpIHtcbiAgcmF5Y2FzdGVyLnNldEZyb21DYW1lcmEobW91c2UsIGNhbWVyYSk7XG4gIGNvbnN0IGludGVyc2VjdHMgPSByYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0cyhzY2VuZS5jaGlsZHJlbik7XG5cbiAgbGV0IHNlbGVjdGVkT2JqZWN0ID0gbnVsbDtcblxuICBpZiAoaW50ZXJzZWN0cy5sZW5ndGggPiAwKSB7XG4gICAgaW50ZXJzZWN0cy5zb3J0KChhLCBiKSA9PiBhLmRpc3RhbmNlIC0gYi5kaXN0YW5jZSk7XG4gICAgc2VsZWN0ZWRPYmplY3QgPSBpbnRlcnNlY3RzWzBdLm9iamVjdDtcbiAgfVxuXG4gIG1vdXNlVGFyZ2V0T2JqZWN0ID0gc2VsZWN0ZWRPYmplY3Q7XG5cbn1cblxuZnVuY3Rpb24gc2V0SG92ZXJlZE9iamVjdChvYmplY3Q6IGFueSkge1xuICBvdXRsaW5lUGFzcy5zZWxlY3RlZE9iamVjdHMgPSBvYmplY3QgPyBbb2JqZWN0XSA6IFtdO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVNb3VzZUNsaWNrKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG5cbiAgaWYgKCFhbGxvd01vdXNlQ2xpY2spIHJldHVybjtcblxuICBpZiAobW91c2VUYXJnZXRPYmplY3QpIHtcbiAgICB0cmFuc2Zvcm1Db250cm9scy5hdHRhY2gobW91c2VUYXJnZXRPYmplY3QpO1xuXG4gICAgXG4gICAgY29uc3Qgb2JqZWN0ID0gc2NlbmUuZ2V0T2JqZWN0QnlJZChtb3VzZVRhcmdldE9iamVjdC5pZCk7XG5cbiAgICBjb25zb2xlLmxvZyhvYmplY3QpXG5cbiAgICBjb25zdCBQQVJBTVMgPSB7XG4gICAgICBwb3NpdGlvblg6IG9iamVjdC5wb3NpdGlvbi54LFxuICAgICAgcG9zaXRpb25ZOiBvYmplY3QucG9zaXRpb24ueSxcbiAgICAgIHBvc2l0aW9uWjogb2JqZWN0LnBvc2l0aW9uLnosXG4gICAgICBzY2FsZVg6IG9iamVjdC5zY2FsZS54LFxuICAgICAgc2NhbGVZOiBvYmplY3Quc2NhbGUueSxcbiAgICAgIHNjYWxlWjogb2JqZWN0LnNjYWxlLnosXG4gICAgICByb3RhdGlvblg6IG9iamVjdC5yb3RhdGlvbi54LFxuICAgICAgcm90YXRpb25ZOiBvYmplY3Qucm90YXRpb24ueSxcbiAgICAgIHJvdGF0aW9uWjogb2JqZWN0LnJvdGF0aW9uLnosXG5cbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIGNvbG9yOiBvYmplY3QubWF0ZXJpYWwuY29sb3IuZ2V0SGV4KClcbiAgICB9XG5cbiAgICBpZiAob2JqZWN0UGFuZSkgb2JqZWN0UGFuZS5kaXNwb3NlKCk7XG4gICAgb2JqZWN0UGFuZSA9IHBhbmUuYWRkRm9sZGVyKHsgdGl0bGU6ICdPYmplY3QnIH0pO1xuXG4gICAgY29uc3QgdHJhbnNmb3JtUGFuZSA9IG9iamVjdFBhbmUuYWRkRm9sZGVyKHsgdGl0bGU6ICdUcmFuc2Zvcm0nIH0pO1xuICAgIFxuICAgIGNvbnN0IHBvc2l0aW9uUGFuZSA9IHRyYW5zZm9ybVBhbmUuYWRkRm9sZGVyKHsgdGl0bGU6ICdQb3NpdGlvbicgfSk7XG4gICAgcG9zaXRpb25QYW5lLmFkZElucHV0KFBBUkFNUywgJ3Bvc2l0aW9uWCcsIHsgbGFiZWw6ICd4JyB9KS5vbignY2hhbmdlJywgKCkgPT4gIG9iamVjdC5wb3NpdGlvbi54ID0gUEFSQU1TLnBvc2l0aW9uWCk7XG4gICAgcG9zaXRpb25QYW5lLmFkZElucHV0KFBBUkFNUywgJ3Bvc2l0aW9uWScsIHsgbGFiZWw6ICd5JyB9KS5vbignY2hhbmdlJywgKCkgPT4gIG9iamVjdC5wb3NpdGlvbi55ID0gUEFSQU1TLnBvc2l0aW9uWSk7XG4gICAgcG9zaXRpb25QYW5lLmFkZElucHV0KFBBUkFNUywgJ3Bvc2l0aW9uWicsIHsgbGFiZWw6ICd6JyB9KS5vbignY2hhbmdlJywgKCkgPT4gIG9iamVjdC5wb3NpdGlvbi56ID0gUEFSQU1TLnBvc2l0aW9uWik7XG5cbiAgICBjb25zdCBzY2FsZVBhbmUgPSB0cmFuc2Zvcm1QYW5lLmFkZEZvbGRlcih7IHRpdGxlOiAnU2NhbGUnIH0pO1xuICAgIHNjYWxlUGFuZS5hZGRJbnB1dChQQVJBTVMsICdzY2FsZVgnLCB7IGxhYmVsOiAneCcgfSkub24oJ2NoYW5nZScsICgpID0+ICBvYmplY3Quc2NhbGUueCA9IFBBUkFNUy5zY2FsZVgpO1xuICAgIHNjYWxlUGFuZS5hZGRJbnB1dChQQVJBTVMsICdzY2FsZVknLCB7IGxhYmVsOiAneScgfSkub24oJ2NoYW5nZScsICgpID0+ICBvYmplY3Quc2NhbGUueSA9IFBBUkFNUy5zY2FsZVkpO1xuICAgIHNjYWxlUGFuZS5hZGRJbnB1dChQQVJBTVMsICdzY2FsZVonLCB7IGxhYmVsOiAneicgfSkub24oJ2NoYW5nZScsICgpID0+ICBvYmplY3Quc2NhbGUueiA9IFBBUkFNUy5zY2FsZVopO1xuICAgIFxuICAgIGNvbnN0IHJvdGF0aW9uUGFuZSA9IHRyYW5zZm9ybVBhbmUuYWRkRm9sZGVyKHsgdGl0bGU6ICdSb3RhdGlvbicgfSk7XG4gICAgcm90YXRpb25QYW5lLmFkZElucHV0KFBBUkFNUywgJ3JvdGF0aW9uWCcsIHsgbGFiZWw6ICd4JyB9KS5vbignY2hhbmdlJywgKCkgPT4gIG9iamVjdC5yb3RhdGlvbi54ID0gUEFSQU1TLnJvdGF0aW9uWCk7XG4gICAgcm90YXRpb25QYW5lLmFkZElucHV0KFBBUkFNUywgJ3JvdGF0aW9uWScsIHsgbGFiZWw6ICd5JyB9KS5vbignY2hhbmdlJywgKCkgPT4gIG9iamVjdC5yb3RhdGlvbi55ID0gUEFSQU1TLnJvdGF0aW9uWSk7XG4gICAgcm90YXRpb25QYW5lLmFkZElucHV0KFBBUkFNUywgJ3JvdGF0aW9uWicsIHsgbGFiZWw6ICd6JyB9KS5vbignY2hhbmdlJywgKCkgPT4gIG9iamVjdC5yb3RhdGlvbi56ID0gUEFSQU1TLnJvdGF0aW9uWik7XG5cblxuICAgIGNvbnN0IG1hdGVyaWFsUGFuZSA9IG9iamVjdFBhbmUuYWRkRm9sZGVyKHsgdGl0bGU6ICdNYXRlcmlhbCcgfSk7XG4gICAgXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIG1hdGVyaWFsUGFuZS5hZGRJbnB1dChQQVJBTVMsICdjb2xvcicsIHsgbGFiZWw6ICdDb2xvcicsIHZpZXc6ICdjb2xvcicgfSkub24oJ2NoYW5nZScsICgpID0+IG9iamVjdC5tYXRlcmlhbC5jb2xvci5zZXRIZXgoUEFSQU1TLmNvbG9yKSk7XG5cbiAgfSBlbHNlIHtcbiAgICB0cmFuc2Zvcm1Db250cm9scy5kZXRhY2goKTtcblxuICAgIG9iamVjdFBhbmUuZGlzcG9zZSgpO1xuXG4gIH1cbn1cblxuXG4vLyBFdmVudHMgdG8gY2hlY2sgaWYgY2xpY2sgaGFzIGJlZW4gaGVsZCB0byBwcmV2ZW50IGRyYWcgY2xpY2tzXG5sZXQgYWxsb3dNb3VzZUNsaWNrID0gdHJ1ZTtcbmxldCBtb3VzZURvd25UaW1lOiBudW1iZXI7XG5sZXQgbW91c2VVcFRpbWU6IG51bWJlcjtcblxuZnVuY3Rpb24gaGFuZGxlTW91c2VEb3duKCkge1xuICBtb3VzZURvd25UaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbn1cblxuZnVuY3Rpb24gaGFuZGxlTW91c2VVcCgpIHtcbiAgbW91c2VVcFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgY29uc3QgZWxhcHNlZFRpbWUgPSBtb3VzZVVwVGltZSAtIG1vdXNlRG93blRpbWU7XG4gIGFsbG93TW91c2VDbGljayA9IGVsYXBzZWRUaW1lIDwgMjUwO1xufVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgaGFuZGxlTW91c2VNb3ZlLCBmYWxzZSk7XG5yZW5kZXJlci5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGhhbmRsZU1vdXNlRG93biwgZmFsc2UpO1xucmVuZGVyZXIuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgaGFuZGxlTW91c2VVcCwgZmFsc2UpO1xucmVuZGVyZXIuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZU1vdXNlQ2xpY2ssIGZhbHNlKTtcblxuXG5cbi8vIEFkZCBzdGF0c1xuLy8gQHRzLWlnbm9yZVxuY29uc3Qgc3RhdHMgPSBuZXcgU3RhdHMoKTtcbnN0YXRzLnNob3dQYW5lbCgwKTtcbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc3RhdHMuZG9tKTtcblxuXG4vLyBBbmltYXRpb24gbG9vcFxuZnVuY3Rpb24gcmVuZGVyKCkge1xuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVuZGVyKTtcbiAgc3RhdHMuYmVnaW4oKTtcbiAgcmVzaXplQ2FudmFzVG9EaXNwbGF5U2l6ZSgpO1xuICBvcmJpdENvbnRyb2xzLnVwZGF0ZSgpO1xuICAvLyByZW5kZXJlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSk7XG4gIGNvbXBvc2VyLnJlbmRlcigpO1xuICBzdGF0cy5lbmQoKTtcbn1cblxuXG5cblxuLy8gVEVTVElORyBUV0VBS1BBTkVcbmNvbnN0IFBBUkFNUyA9IHtcbiAgYmFja2dyb3VuZDogY29uZmlnLmJhY2tncm91bmRDb2xvclxufVxuXG5jb25zdCBwYW5lID0gbmV3IFBhbmUoKTtcblxucGFuZS5hZGRJbnB1dChQQVJBTVMsICdiYWNrZ3JvdW5kJywgeyB2aWV3OiAnY29sb3InIH0pLm9uKCdjaGFuZ2UnLCAoKSA9PiByZW5kZXJlci5zZXRDbGVhckNvbG9yKFBBUkFNUy5iYWNrZ3JvdW5kKSk7XG5cbmxldCBvYmplY3RQYW5lOiBGb2xkZXJBcGk7XG5cbnJlbmRlcigpO1xuXG5cbi8vIFV0aWxpdGllc1xuZnVuY3Rpb24gcmVzaXplQ2FudmFzVG9EaXNwbGF5U2l6ZSgpIHtcbiAgY29uc3QgY2FudmFzID0gcmVuZGVyZXIuZG9tRWxlbWVudDtcbiAgY29uc3Qgd2lkdGggPSBjYW52YXMuY2xpZW50V2lkdGg7XG4gIGNvbnN0IGhlaWdodCA9IGNhbnZhcy5jbGllbnRIZWlnaHQ7XG5cbiAgaWYgKGNhbnZhcy53aWR0aCAhPT0gd2lkdGggfHwgY2FudmFzLmhlaWdodCAhPT0gaGVpZ2h0KSB7XG4gICAgY2FtZXJhLmFzcGVjdCA9IHdpZHRoIC8gaGVpZ2h0O1xuICAgIGNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG4gICAgcmVuZGVyZXIuc2V0U2l6ZShcbiAgICAgIE1hdGguZmxvb3Iod2lkdGggKiBjb25maWcucGl4ZWxSYXRpbyksXG4gICAgICBNYXRoLmZsb29yKGhlaWdodCAqIGNvbmZpZy5waXhlbFJhdGlvKSxcbiAgICAgIGZhbHNlXG4gICAgKTtcbiAgfVxufSIsImltcG9ydCBjb25maWcgZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnO1xuXG4vLyBDaGFuZ2UgY29uZmlnXG4vLyBjb25maWcucGl4ZWxSYXRpbyA9IDE7XG4vLyBjb25maWcuYW50aWFsaWFzID0gZmFsc2U7XG5cbi8vIEdldCBjYW52YXNcbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNqcy1jYW52YXMnKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcblxuLy8gUHJlcGFyZSByZW5kZXJlclxuY29uc3QgcmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcih7XG4gIGNhbnZhcyxcbiAgYW50aWFsaWFzOiBjb25maWcuYW50aWFsaWFzLFxuICBwb3dlclByZWZlcmVuY2U6ICdoaWdoLXBlcmZvcm1hbmNlJ1xufSk7XG5yZW5kZXJlci5zZXRTaXplKFxuICBNYXRoLmZsb29yKGNhbnZhcy5jbGllbnRXaWR0aCAqIGNvbmZpZy5waXhlbFJhdGlvKSxcbiAgTWF0aC5mbG9vcihjYW52YXMuY2xpZW50SGVpZ2h0ICogY29uZmlnLnBpeGVsUmF0aW8pLFxuICBmYWxzZVxuKTtcbnJlbmRlcmVyLm91dHB1dEVuY29kaW5nID0gVEhSRUUuc1JHQkVuY29kaW5nO1xucmVuZGVyZXIudG9uZU1hcHBpbmcgPSBUSFJFRS5BQ0VTRmlsbWljVG9uZU1hcHBpbmc7XG5yZW5kZXJlci5zZXRDbGVhckNvbG9yKGNvbmZpZy5iYWNrZ3JvdW5kQ29sb3IpO1xuXG5leHBvcnQgZGVmYXVsdCByZW5kZXJlcjsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=